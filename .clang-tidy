# clang-tidy configuration for libiqxmlrpc
# C++17 XML-RPC library with focus on safety, performance, and modern practices
#
# Philosophy: Focus on catching real bugs, not style preferences.
# Checks are tuned to minimize noise while catching security and correctness issues.

Checks: >
  -*,
  bugprone-*,
  -bugprone-easily-swappable-parameters,
  -bugprone-exception-escape,
  -bugprone-narrowing-conversions,
  cert-*,
  -cert-err58-cpp,
  concurrency-*,
  cppcoreguidelines-avoid-goto,
  cppcoreguidelines-slicing,
  misc-redundant-expression,
  modernize-avoid-bind,
  modernize-deprecated-headers,
  modernize-loop-convert,
  modernize-make-shared,
  modernize-make-unique,
  modernize-redundant-void-arg,
  modernize-replace-random-shuffle,
  modernize-use-auto,
  modernize-use-bool-literals,
  modernize-use-emplace,
  modernize-use-equals-default,
  modernize-use-equals-delete,
  modernize-use-nullptr,
  modernize-use-override,
  performance-*,
  -performance-no-int-to-ptr,
  readability-container-size-empty,
  readability-duplicate-include,
  readability-redundant-smartptr-get,
  readability-simplify-boolean-expr,
  readability-string-compare

WarningsAsErrors: ''

HeaderFilterRegex: 'libiqxmlrpc/.*\.h$'

CheckOptions:
  # modernize-use-nullptr
  - key: modernize-use-nullptr.NullMacros
    value: 'NULL'

  # modernize-loop-convert
  - key: modernize-loop-convert.MaxCopySize
    value: '16'
  - key: modernize-loop-convert.MinConfidence
    value: 'reasonable'

  # performance-move-const-arg
  - key: performance-move-const-arg.CheckTriviallyCopyableMove
    value: 'false'

  # performance-unnecessary-value-param
  - key: performance-unnecessary-value-param.AllowedTypes
    value: 'Value'

  # bugprone-argument-comment
  - key: bugprone-argument-comment.StrictMode
    value: 'false'

  # cppcoreguidelines-pro-type-member-init
  - key: cppcoreguidelines-pro-type-member-init.IgnoreArrays
    value: 'true'

  # misc-unused-parameters
  - key: misc-unused-parameters.StrictMode
    value: 'false'
